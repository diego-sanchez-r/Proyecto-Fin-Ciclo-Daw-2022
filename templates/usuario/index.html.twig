{% extends 'base.html.twig' %}

{% block title %}Hello UsuarioController!{% endblock %}

{% block body %}
    {%include 'menu.html.twig' %}
    <script
      src="https://code.jquery.com/jquery-3.6.0.slim.js"
      integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY="
      crossorigin="anonymous"></script>
    <style>
        .contenedor {
            width: 90%;
            max-width: 100%;
            margin: 0 auto; 
        }
        #formulario_actualizar_foto{
            display: none;
        }
        #boton{
          display: none;  
        }
        #editar_cancel{
            display: none;
            float: right;
        }
    </style>
    
    <div class="contenedor">
        <h2 class="titulo">Perfil</h2>
        <link rel="stylesheet" href="/css/style_perfilUsuario.css" />
        <div class="page-content page-container" id="page-content">
        <div class="padding">
            <div class="row container d-flex justify-content-center">
                <div class="col-xl-6 col-md-12">
                    <div class="card user-card-full">
                        <div class="row m-l-0 m-r-0">
                            <div class="col-sm-4 bg-c-lite-green user-profile">
                                <div class="card-block text-center text-white">
                                    <div class="m-b-25">
                                    <img id="foto_usuario_cambio" title="Cambiar Imagen"  src="/imagenes/img_users/{{ app.user.imagen }}" class="img-radius" height="90px" width="120px" alt="..."><br><a href="{{ path("logout") }}" title="Cerrar Sesión" style="font-size: x-small; text-decoration: none;" >Salir <i class="fa-solid fa-right-from-bracket"></i></a> </div>
                                    {{ form_start(form_foto,{'attr': {'id': 'formulario_actualizar_foto'}}) }}
                                    <input type="submit">
                                    {{ form_end(form_foto) }}
                                    <h6 class="f-w-600">{{ app.user.nombre }} {{ app.user.apellidos }}</h6>
                                    <p>Mi Perfil</p> <i class=" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16"></i>
                                </div>
                            </div>
                            <div class="col-sm-8">
                                <div class="card-block">
                                    <h6 class="m-b-20 p-b-5 b-b-default f-w-600">Información 
                                        <i id="editar_perfil" title="Editar Perfil" class="fa-solid fa-pen-to-square text-primary"></i>
                                        <i id="editar_cancel" title="Cancelar Edición" class="fa-solid fa-circle-xmark text-danger"></i>
                                    </h6>
                                    <div class="row">
                                        <div class="col-sm-6">
                                        <form action="{{ path("edit_perfil")}}" method="post" >
                                            <p class="m-b-10 f-w-600">Email</p>
                                            <h6 class="text-muted f-w-400"><input type="email" name="email" id="email" required value="{{ app.user.email }}" disabled ></h6>
                                        </div>
                                        <div class="col-sm-6">
                                            <p class="m-b-10 f-w-600">Teléfono</p>
                                            <h6 class="text-muted f-w-400"><input type="text" name="telefono" id="telefono" required value="{{ app.user.telefono }}" disabled ></h6>
                                        </div>
                                    </div>
                                    <h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600">Ubicación Usuario</h6>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <p class="m-b-10 f-w-600">Código Postal</p>
                                            <h6 class="text-muted f-w-400"><input type="text" name="codigo" id="codigo" required value="{{ app.user.codigo }}" disabled ></h6>
                                        </div>
                                    </div>
                                        
                                    
                                        
                                    <ul class="social-link list-unstyled m-t-40 m-b-10">
                                        <li><a href="#!" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="facebook" data-abc="true"><i class="mdi mdi-facebook feather icon-facebook facebook" aria-hidden="true"></i></a></li>
                                        <li><a href="#!" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="twitter" data-abc="true"><i class="mdi mdi-twitter feather icon-twitter twitter" aria-hidden="true"></i></a></li>
                                        <li><a href="#!" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="instagram" data-abc="true"><i class="mdi mdi-instagram feather icon-instagram instagram" aria-hidden="true"></i></a></li>
                                    </ul>
                                        <button type="submit" id="boton" class="btn btn-primary"><i class="fa-solid fa-floppy-disk"></i> Guardar</button> 
                                        </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $('#foto_usuario_cambio').click(function () {
        $('#form_imagen').click();
    });

    $('#form_imagen').change(function () {
        $('#formulario_actualizar_foto').submit();
    });
    
    $('#editar_perfil').click(function () {
       $("#editar_cancel").css("display", "block");
       $("#boton").css("display", "block"); 
       $('#email').prop('disabled',false);
       $('#telefono').prop('disabled',false);
       $('#codigo').prop('disabled',false);
    });
    
    $('#editar_cancel').click(function () {
       $('#email').prop('disabled',true);
       $('#telefono').prop('disabled',true);
       $('#codigo').prop('disabled',true);
       $("#boton").css("display", "none");
       $("#editar_cancel").css("display", "none");
    });
    </script>
    {%include 'footer.html.twig' %} 
{% endblock %}
